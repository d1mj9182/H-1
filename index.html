테11
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>당일민족 | 인터넷가입 공식파트너</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<style>
  /* ===== 전역 ===== */
  html,body{overflow-x:hidden}
  *,*::before,*::after{box-sizing:border-box}
  body{background:#f7f8fb;}

  /* ===== 상단바/네비 ===== */
  .nav-auth-bar{width:100%;background:#f4f7fe;border-bottom:1px solid #e3eaf6}
  .nav-auth-inner{max-width:1280px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:10px 16px}
  .nav-brand{display:flex;align-items:center;gap:10px;font-family:'Pretendard','Noto Sans KR',sans-serif;font-weight:800;letter-spacing:-.01em;color:#2563eb;font-size:22px;cursor:pointer}
  .nav-brand-badge{width:10px;height:10px;border-radius:3px;background:#2563eb;box-shadow:0 0 0 3px rgba(37,99,235,.18)}
  .nav-auth-btn{color:#2563eb;background:none;border:none;font-size:15px;font-weight:600;padding:6px 14px;border-radius:7px;cursor:pointer}

  .nav-2025-wrap{background:#fff;border-bottom:1.2px solid #ececec;position:relative;z-index:80}
  .nav-2025-inner{max-width:1280px;margin:0 auto;display:flex;align-items:center;gap:36px;padding:16px 24px 8px 24px;font-family:'Pretendard','Noto Sans KR',sans-serif;font-weight:600;font-size:20px}
  .nav-2025-main{display:flex !important;flex-wrap:nowrap;gap:26px;align-items:center;list-style:none;margin:0;padding:0;justify-content:flex-start;white-space:nowrap;overflow-x:auto}
  .nav-2025-main li{display:inline-flex;align-items:center;cursor:pointer;user-select:none}
  .nav-2025-menu-btn{font-size:24px;color:#8ea5d3;background:none;border:none;cursor:pointer;padding:2px 6px}

  /* ===== 서브칩 바 ===== */
  .nav-2025-subbar-wrap{
    width:100%;left:0;position:absolute;top:calc(100% - 1px);
    display:none;background:#fff;border-bottom:2px solid #e8eefb;
    box-shadow:0 8px 34px rgba(59,130,246,.08);padding:10px 0;z-index:999;
    pointer-events:none;
  }
  .nav-2025-subbar-wrap.show{display:block;}
  .nav-2025-subbar-wrap .subbar-stage{pointer-events:auto;}
  .subbar-stage{max-width:1280px;margin:0 auto;position:relative;padding:0 24px 6px 24px;}
  .subbar-viewport{position:relative;overflow:hidden;--edge:32px;}
  .subbar-track{
    overflow-x:auto; overflow-y:visible; -webkit-overflow-scrolling:touch;
    white-space:nowrap; padding:6px 0 10px 0; scroll-behavior:smooth;
    scrollbar-width:none; -ms-overflow-style:none;
    mask-image: linear-gradient(to right, transparent 0, #000 var(--edge), #000 calc(100% - var(--edge)), transparent 100%);
  }
  .subbar-track::-webkit-scrollbar{display:none;height:0}
  .nav-2025-subbar-inner{
    display:inline-flex; gap:10px; align-items:center; justify-content:flex-start;
    font-size:16px;font-weight:700;color:#334155; padding-right:28px;
  }
  .nav-2025-subbar-inner span{
    cursor:pointer; user-select:none; -webkit-user-select:none; outline: none;
    padding:8px 14px;border-radius:999px;transition:background .12s,color .12s;
    border:1px solid transparent; background:transparent; display:inline-block;
  }
  .nav-2025-subbar-inner span:hover{background:#f1f5ff;color:#1d4ed8}
  .nav-2025-subbar-inner span:focus-visible{box-shadow:0 0 0 3px rgba(59,130,246,.24);border-color:#bfdbfe}
  .nav-2025-subbar-inner .is-active{background:#eaf1ff;color:#1e40af;border-color:#c7ddff}
  .subbar-nav{
    position:absolute;top:0;bottom:0;display:flex;align-items:center;justify-content:center;
    width:36px;color:#1d4ed8;background:rgba(255,255,255,.92);backdrop-filter:saturate(140%) blur(2px);
    border:1px solid #e5ecff;border-radius:10px;cursor:pointer;opacity:0;pointer-events:none;
    transition:opacity .18s, transform .18s; box-shadow:0 4px 16px rgba(59,130,246,.08);
  }
  .subbar-nav i{font-size:16px}
  .subbar-nav.left{left:4px; transform:translateX(-6px)}
  .subbar-nav.right{right:4px; transform:translateX(6px)}
  .subbar-nav.show{opacity:1;pointer-events:auto;transform:translateX(0)}
  @media (max-width:900px){
    .nav-2025-subbar-inner{scrollbar-width:none}
    .subbar-track{mask-image:none}
    .subbar-nav{width:32px}
  }

  /* ===== 고정 버튼 ===== */
  #consultOpenBtn{
    position:fixed;left:50%;transform:translateX(-50%);bottom:28px;z-index:51;
    background:linear-gradient(90deg,#2563eb,#3b82f6);color:#fff;
    font-size:1.6rem;font-weight:800;padding:1.2rem 2.8rem;border-radius:2.4rem;border:none;
    box-shadow:0 2px 14px rgba(59,130,246,.18);cursor:pointer
  }
  @media(max-width:900px){
    #consultOpenBtn{ font-size:.95rem;padding:.7rem 1.4rem;border-radius:1.6rem;bottom:22px; }
  }
  #scrollTopBtn{
    position:fixed;right:18px;bottom:28px;z-index:51;
    background:linear-gradient(90deg,#0ea5e9,#22d3ee); color:#fff; font-size:.98rem; font-weight:700;
    padding:.85rem 1.2rem; border-radius:999px; border:none; box-shadow:0 2px 14px rgba(2,132,199,.18); cursor:pointer;
    display:flex;align-items:center;gap:8px;
  }
  #scrollTopBtn i{font-size:1rem}
  @media(max-width:900px){
    #scrollTopBtn{width:44px;height:44px;padding:0;border-radius:999px;justify-content:center;}
    #scrollTopBtn .txt{display:none}
  }

  /* ===== 섹션 ===== */
  .custom-section{width:100%;background:#fff;display:flex;align-items:center;justify-content:center;padding:80px 0;min-height:520px}
  .section-inner{width:100%;max-width:1280px;margin:0 auto;padding:0 2vw;display:flex;flex-direction:column;align-items:center}

  /* ===== 상담 폼(복원 + 최상위) ===== */
  #fixedFormWrapper{
    position:fixed;left:0;right:0;bottom:0;z-index:1200;
    background:linear-gradient(90deg,#2563eb,#3b82f6);
    border-top:2px solid #2563eb;box-shadow:0 -4px 24px rgba(0,0,0,.1);
    transition:transform .38s cubic-bezier(.38,.94,.6,1.07),opacity .28s;
    transform:translateY(100%);opacity:0;pointer-events:none;
  }
  #fixedFormWrapper.active{transform:translateY(0);opacity:1;pointer-events:auto}
  .consult-form-inner{
    background:#fff;border-radius:.8rem;box-shadow:0 4px 16px rgba(59,130,246,.1);
    padding:1.2rem .8rem;display:flex;flex-wrap:wrap;align-items:center;gap:.7rem;
    max-width:680px;margin:1.1rem auto
  }
  .consult-form-inner input,.consult-form-inner select{
    min-width:100px;font-size:1rem;padding:.55rem .7rem;border:2px solid #93c5fd;border-radius:.55rem;background:#f8fafc
  }
  .consult-form-inner button{
    min-width:90px;padding:.6rem 1.6rem;font-size:1rem;font-weight:700;
    background:linear-gradient(90deg,#2563eb,#3b82f6);color:#fff;border-radius:.55rem;border:none
  }
  #consultCloseBtn{
    background:none;border:none;color:#2563eb;font-size:1.4rem;font-weight:700;
    position:absolute;right:16px;top:16px;cursor:pointer
  }

  /* ===== 하단 푸터/DM ===== */
  .footer-basic{background:#f8f9fa;border-top:1px solid #ececec;margin-top:30px;padding:36px 0 92px 0}
  .footer-inner{max-width:950px;margin:0 auto;padding:0 16px}
  .footer-biz{font-size:14px;color:#222;line-height:1.7;text-align:left;word-break:keep-all}
  .footer-copy{text-align:right;color:#b3bfd2;font-size:13px;margin-top:14px}

  .dm-wrap{max-width:900px;margin:20px auto;font-family:system-ui,Segoe UI,Roboto,Apple SD Gothic Neo,Arial,sans-serif;color:#111}
  .dm-row{margin:18px 0}
  .dm-title{font-weight:800;margin-bottom:8px}
  .dm-btn{display:inline-flex;align-items:flex-start;gap:4px;vertical-align:top;min-width:140px;padding:10px 14px;margin:4px;border:1.8px solid #d6d9e0;border-radius:10px;background:#fff;cursor:pointer;user-select:none;line-height:1.2;position:relative;white-space:nowrap}
  .dm-btn b{display:block;font-size:14px}
  .dm-btn small{display:block;margin-top:3px;font-size:12px;color:#666}
  .dm-btn.active{border-color:#d60028;box-shadow:0 0 0 3px rgba(214,0,40,.12)}
  .badge-reco{position:absolute;right:8px;top:-8px;background:#d60028;color:#fff;font-size:10px;font-weight:800;padding:2px 6px;border-radius:999px;z-index:3}

  .dm-check{margin-right:6px}
  .dm-total{border:2px solid #d60028;border-radius:10px;padding:14px;font-weight:800;font-size:18px}
  .dm-break{font-size:13px;color:#444;margin-top:6px}
  .dm-note{margin-top:10px;border:1px dashed #e2e8f0;background:#fafbff;border-radius:12px;padding:10px 12px;color:#6b7280;font-size:12px}
  .dm-note .tit{display:flex;align-items:center;gap:8px;font-weight:700;color:#6b7280;font-size:13px;margin-bottom:4px}
  .dm-note ul{margin-left:16px;list-style:circle}
  .dm-note li{margin:2px 0}
  .dm-help{font-size:12px;color:#666;margin-top:4px}

  .privacy-toggle{color:#2563eb;cursor:pointer;user-select:none;margin-left:4px}
  .privacy-panel{max-height:0;overflow:hidden;transition:max-height .28s ease;background:#f8fafc;border:1px solid #dbeafe;border-radius:10px;margin-top:8px}
  .privacy-panel.open{max-height:540px;overflow:auto}
  .privacy-panel-inner{padding:12px;font-size:12px;color:#475569;line-height:1.6}

  /* ===== 상세(아래 구간) 공용: 스크롤바 없는 가로 스크롤 컴포넌트 ===== */
  :root{ --endpad: 28px; --hs-edge: 28px; }
  .hs-wrap{position:relative}
  .hs-viewport{position:relative;overflow:hidden}
  .hs-track{
    overflow-x:auto; overflow-y:visible; -webkit-overflow-scrolling:touch;
    white-space:nowrap; padding-bottom:10px; padding-right:var(--endpad);
    scroll-padding-inline-end:var(--endpad); scroll-behavior:smooth;
    scrollbar-width:none; -ms-overflow-style:none;
    mask-image: linear-gradient(to right, transparent 0, #000 var(--hs-edge), #000 calc(100% - var(--hs-edge)), transparent 100%);
  }
  .hs-track::-webkit-scrollbar{display:none;height:0}
  .hs-nav{
    position:absolute;top:0;bottom:0;display:flex;align-items:center;justify-content:center;
    width:32px;color:#1d4ed8;background:rgba(255,255,255,.95);
    border:1px solid #e5ecff;border-radius:10px;cursor:pointer;opacity:0;pointer-events:none;
    transition:opacity .18s, transform .18s; box-shadow:0 4px 16px rgba(59,130,246,.08); z-index:2;
  }
  .hs-nav i{font-size:14px}
  .hs-nav.left{left:-4px; transform:translateX(-6px)}
  .hs-nav.right{right:-4px; transform:translateX(6px)}
  .hs-nav.show{opacity:1;pointer-events:auto;transform:translateX(0)}
  /* 기존 x-scroll 호환(그대로 써도 자동 업그레이드됨) */
  .x-scroll{white-space:nowrap}
  @media (max-width:900px){
    .hs-track{mask-image:none}
    .hs-nav{width:28px}
  }

  .dm-final-wrap{margin-top:18px;border:1px solid #e5e9f5;border-radius:12px;background:#fff}
  .dm-final-hd{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid #eef2fb}
  .dm-final-hd b{font-size:16px}
  .dm-final-body{padding:8px 10px}
  .dm-table{width:100%;border-collapse:separate;border-spacing:0;min-width:720px}
  .dm-table th,.dm-table td{font-size:13px;text-align:center;padding:10px 8px;white-space:nowrap;border-bottom:1px solid #f0f2f8}
  .dm-table th{background:#f7f9ff;font-weight:800}
  .dm-table tr:last-child td{border-bottom:none}
  .dm-chip{display:inline-block;padding:2px 8px;border-radius:999px;background:#eef3ff;color:#2b59ff;font-weight:700;font-size:12px}
  .dm-tag{display:inline-block;padding:2px 8px;border-radius:999px;background:#fff2f2;color:#d60028;font-weight:800;font-size:11px;margin-left:4px}
</style>
</head>
<body>

<!-- 상단바 -->
<div class="nav-auth-bar">
  <div class="nav-auth-inner">
    <div class="nav-brand" onclick="location.href='/'"><span class="nav-brand-badge"></span><span>당일민족</span></div>
    <div class="nav-auth-actions">
      <button class="nav-auth-btn">로그인</button>
      <button class="nav-auth-btn">회원가입</button>
    </div>
  </div>
</div>

<!-- 네비 + 인터넷 카테고리 -->
<div class="nav-2025-wrap" id="navWrap">
  <div class="nav-2025-inner">
    <ul class="nav-2025-main x-scroll" id="topMainTabs">
      <li><button class="nav-2025-menu-btn" aria-label="전체메뉴"><i class="fa-solid fa-bars"></i></button></li>
      <li id="navInternet">인터넷</li>
      <li id="navRental">가전렌탈</li>
      <li id="navGifts">사은품지급명단</li>
      <li id="navReview">후기</li>
      <i class="endpad" aria-hidden="true"></i>
    </ul>
  </div>

  <!-- 서브칩 바 -->
  <div class="nav-2025-subbar-wrap" id="internetBar" role="region" aria-label="인터넷 카테고리">
    <div class="subbar-stage">
      <button class="subbar-nav left" id="subbarPrev" aria-label="왼쪽으로"><i class="fa-solid fa-chevron-left"></i></button>
      <div class="subbar-viewport">
        <div class="subbar-track" id="subbarTrack">
          <div class="nav-2025-subbar-inner" id="internetCats" role="listbox" aria-orientation="horizontal" tabindex="0">
            <span data-carrier="SK" role="option" tabindex="0" class="is-active">SK</span>
            <span data-carrier="KT" role="option" tabindex="0">KT</span>
            <span data-carrier="LG" role="option" tabindex="0">LG</span>
            <span data-carrier="스카이라이프" role="option" tabindex="0">스카이라이프</span>
            <span data-carrier="헬로비전" role="option" tabindex="0">헬로비전</span>
            <span data-carrier="SKPOP" role="option" tabindex="0">SKPOP(알뜰)</span>
            <i class="endpad" aria-hidden="true"></i>
          </div>
        </div>
      </div>
      <button class="subbar-nav right" id="subbarNext" aria-label="오른쪽으로"><i class="fa-solid fa-chevron-right"></i></button>
    </div>
  </div>
</div>

<!-- ▼ 상세 래퍼 -->
<section id="internet-detail" class="custom-section" style="display:none;">
  <div class="section-inner">

    <section id="internet-comp" class="dm-wrap" aria-label="인터넷 - 상세">
      <!-- 1) 통신사 -->
      <div class="dm-row">
        <div class="dm-title">통신사</div>
        <div id="dm-carriers" class="x-scroll has-badges">
          <span class="dm-btn active" data-carrier="SK"><b>SK</b></span>
          <span class="dm-btn" data-carrier="KT"><b>KT</b></span>
          <span class="dm-btn" data-carrier="LG"><b>LG</b></span>
          <span class="dm-btn" data-carrier="스카이라이프"><b>스카이라이프</b></span>
          <span class="dm-btn" data-carrier="헬로비전"><b>헬로비전</b></span>
          <span class="dm-btn" data-carrier="SKPOP"><b>SKPOP(알뜰)</b></span>
          <i class="endpad" aria-hidden="true"></i>
        </div>
      </div>

      <!-- 2) 속도 -->
      <div class="dm-row" id="dm-speeds">
        <div class="dm-title">인터넷 속도</div>
        <div id="dm-speed-options" class="x-scroll has-badges"><i class="endpad" aria-hidden="true"></i></div>
      </div>

      <!-- 옵션 -->
      <div class="dm-row">
        <label><input id="dm-tv-toggle" class="dm-check" type="checkbox" checked>TV 포함</label>
        <label><input id="dm-wifi-toggle" class="dm-check" type="checkbox" checked>와이파이 포함</label>
      </div>

      <!-- 3) TV 요금제 -->
      <div class="dm-row" id="dm-tv-section">
        <div class="dm-title">TV 요금제</div>
        <div id="dm-tv-options" class="x-scroll has-badges"><i class="endpad" aria-hidden="true"></i></div>
      </div>

      <!-- 4) 결합 / 할인 -->
      <div class="dm-row" id="dm-discounts">
        <div class="dm-title">결합 / 할인</div>

        <div id="dm-bundle-mobile" class="x-scroll has-badges">
          <span class="dm-btn active" data-mobile="0"><b>결합 없음</b></span>
          <span class="dm-btn" data-mobile="-3300"><b>결합할인</b><small>-3,300원</small></span>
          <span class="dm-btn" data-mobile="-5500"><b>결합할인</b><small>-5,500원</small></span>
          <span class="dm-btn" data-mobile="-9900"><b>결합할인</b><small>-9,900원</small></span>
          <span class="dm-btn" data-mobile="-13200"><b>결합할인</b><small>-13,200원</small></span>
          <i class="endpad" aria-hidden="true"></i>
        </div>

        <!-- 5) SK 온가족할인 -->
        <div id="dm-family-wrap" style="margin-top:10px;">
          <div style="font-weight:700;margin:8px 4px 6px 4px;color:#334155">SK 온가족할인</div>
          <div id="dm-family" class="x-scroll has-badges">
            <span class="dm-btn active" data-family="none"><b>미적용</b></span>
            <span class="dm-btn" data-family="30"><b>30% 할인</b><small>속도별 자동 적용</small></span>
            <span class="dm-btn" data-family="50"><b>50% 할인</b><small>속도별 자동 적용</small></span>
            <i class="endpad" aria-hidden="true"></i>
          </div>
          <div class="dm-help">* 온가족할인은 <b>인터넷 요금(조합 적용가)</b>에서 추가 차감됩니다.</div>
        </div>
      </div>

      <!-- 6) 합계/안내 -->
      <div class="dm-row dm-total">
        <div id="dm-total-scroll" class="x-scroll">
          <span id="dm-total">월 0원</span>
          <span id="dm-breakdown" class="dm-break"></span>
          <i class="endpad" aria-hidden="true"></i>
        </div>
        <div class="dm-note" id="dm-notice">
          <div class="tit"><i class="fa-solid fa-circle-info"></i>안내</div>
          <ul>
            <li>최종 금액은 <b>셋톱박스·WIFI 정책</b>에 따라 일부 차이가 있을 수 있습니다.</li>
            <li><b>설치비</b>는 1회 청구되며 위 금액에 <b>미포함</b>입니다.</li>
            <li>모든 요금은 <b>VAT 포함</b> 기준입니다.</li>
          </ul>
        </div>
      </div>

      <!-- ✅ 최종 요금표 -->
      <div class="dm-final-wrap" id="dm-final">
        <div class="dm-final-hd">
          <b>최종 요금표 <span id="dm-final-tag" class="dm-tag">선택 조합 기준</span></b>
          <span class="dm-chip" id="dm-final-carrier">SK</span>
        </div>
        <div class="dm-final-body">
          <div class="x-scroll dm-table-wrap" id="dm-table-scroll">
            <table class="dm-table" id="dm-final-table">
              <thead>
                <tr>
                  <th>속도</th>
                  <th>인터넷</th>
                  <th>TV</th>
                  <th>결합할인</th>
                  <th>온가족</th>
                  <th>합계(월)</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
            <i class="endpad" aria-hidden="true"></i>
          </div>
          <div class="dm-help" id="dm-final-help">* 현재 선택(와이파이/TV/결합/온가족) 기준으로 각 속도의 최종 월요금을 보여줍니다.</div>
        </div>
      </div>
    </section>
  </div>
</section>

<!-- 더미 섹션 -->
<section id="sec1" class="custom-section"><div class="section-inner">여기에 1번째 상세페이지 내용</div></section>
<section id="sec2" class="custom-section"><div class="section-inner">여기에 2번째 상세페이지 내용</div></section>
<section id="sec3" class="custom-section"><div class="section-inner">여기에 3번째 상세페이지 내용</div></section>
<section id="sec4" class="custom-section"><div class="section-inner">여기에 4번째 상세페이지 내용</div></section>
<section id="sec5" class="custom-section"><div class="section-inner">여기에 5번째 상세페이지 내용</div></section>

<div id="footer-spacer"></div>

<button id="consultOpenBtn" aria-label="상담신청 열기">상담신청</button>
<button id="scrollTopBtn" aria-label="맨위로"><i class="fa-solid fa-arrow-up"></i><span class="txt">맨위로</span></button>

<!-- 상담 폼 -->
<div id="fixedFormWrapper" aria-label="상담신청 폼">
  <button id="consultCloseBtn" aria-label="상담신청 닫기">&times;</button>
  <form id="consultForm" class="consult-form-inner" aria-describedby="privacyHelp">
    <input type="text" id="name" required placeholder="성함" autocomplete="off">
    <input type="tel" id="phone" required placeholder="010-1234-5678" autocomplete="off">
    <select id="category" required>
      <option value="">상품 선택</option>
      <option>인터넷 + TV</option>
      <option>인터넷 단품</option>
      <option>TV 단품</option>
      <option>CCTV</option>
      <option>유심</option>
    </select>
    <div class="w-full flex items-center justify-between gap-3">
      <div class="flex items-center gap-2 text-sm text-gray-700">
        <input id="agree" type="checkbox" required>
        <label for="agree"><strong>개인정보 수집·이용(필수)</strong> 동의
          <span id="privacyAccordionToggle" class="privacy-toggle" role="button" tabindex="0" aria-expanded="false" aria-controls="privacyAccordion">[더보기]</span>
        </label>
      </div>
      <button type="submit">신청</button>
    </div>
    <div id="privacyHelp" class="text-xs text-gray-500 w-full mt-1">상담 진행을 위해 최소한의 개인정보가 수집·이용되며, 목적 달성 후 지체 없이 파기됩니다.</div>
    <div id="privacyAccordion" class="privacy-panel" role="region" aria-label="개인정보 처리 안내">
      <div class="privacy-panel-inner">
        <p><strong>개인정보 처리 안내(상세)</strong></p>
        <ul>
          <li><b>수집항목</b>: 성함, 연락처, 신청상품, 상담 메모(요청사항/통화기록 요약), 접수일시, 접수채널</li>
          <li><b>수집방법</b>: 온라인 신청서, 유선상담(상담원이 수기 입력)</li>
          <li><b>이용목적</b>: 가입상담, 설치 일정 조율, 요금제/사은품 안내, 본인확인 및 계약 체결·이행</li>
          <li><b>보유·이용기간</b>: 목적 달성 후 지체 없이 파기. 단, 분쟁 예방 및 처리 목적의 최소 정보는 <u>3년</u> 보관 후 파기</li>
          <li><b>처리위탁</b>: 상담/접수 시스템 운영 및 저장(Airtable·국내 대행 서버), 알림/연락 발송.</li>
          <li><b>제3자 제공</b>: 선택 통신사 및 설치 대행점에 한함</li>
        </ul>
      </div>
    </div>
    <div class="flex items-center gap-2 text-sm text-gray-600 w-full">
      <input id="mktAgree" type="checkbox"><label for="mktAgree">혜택/프로모션 안내 수신 동의(선택)</label>
    </div>
  </form>
</div>

<footer class="footer-basic">
  <div class="footer-inner">
    <div class="footer-biz">
      <strong>상호</strong> 당일민족 &nbsp;|&nbsp; <strong>대표자</strong> 이진호<br>
      <strong>사업자등록번호</strong> 706-24-00856 &nbsp;|&nbsp; <strong>통신판매업신고</strong> 2024-광주광산-0343호<br>
      <strong>대표번호</strong> <a href="tel:1661-9182">1661-9182</a> &nbsp;|&nbsp; <strong>개인정보책임자</strong> 이진호
    </div>
    <div class="footer-copy">© 2025 당일민족. All rights reserved.</div>
  </div>
</footer>

<script>
/* ===== 유틸 ===== */
const isMobile = ()=> window.matchMedia('(max-width: 900px)').matches;
const $ = s=>document.querySelector(s);
const $$ = s=>document.querySelectorAll(s);
const money = n => (n||0).toLocaleString('ko-KR');
function clamp(n,min,max){return Math.max(min,Math.min(max,n));}
function ensureEndpad(el){
  if(!el) return;
  if(!el.querySelector(':scope > .endpad')){ const pad=document.createElement('i'); pad.className='endpad'; pad.setAttribute('aria-hidden','true'); el.appendChild(pad); }
}

/* ===== 메뉴/서브: 표시/숨김 ===== */
const navInternet = $('#navInternet');
const internetBar = $('#internetBar');
const subbarTrack = $('#subbarTrack');
const internetCats = $('#internetCats');
const btnPrev = $('#subbarPrev');
const btnNext = $('#subbarNext');

let hoverTimer=null; const CLOSE_DELAY=450;
function showBarNow(){ clearTimeout(hoverTimer); internetBar.classList.add('show'); updateSubbarUI(); }
function hideBarLater(){ clearTimeout(hoverTimer); hoverTimer=setTimeout(()=>internetBar.classList.remove('show'), CLOSE_DELAY); }

navInternet.addEventListener('pointerenter', ()=>{ if (!isMobile()) showBarNow(); });
navInternet.addEventListener('pointerleave', ()=>{ if (!isMobile()) hideBarLater(); });
internetBar.addEventListener('pointerenter', ()=>{ if (!isMobile()) showBarNow(); });
internetBar.addEventListener('pointerleave', ()=>{ if (!isMobile()) hideBarLater(); });

navInternet.addEventListener('click', (e)=>{
  if (isMobile()){
    e.stopPropagation();
    const willOpen = !internetBar.classList.contains('show');
    internetBar.classList.toggle('show');
    if (willOpen){ requestAnimationFrame(()=>{ ensureEndpad(internetCats); scrollCatsToSelected(); updateSubbarUI(); }); }
  } else showBarNow();
});
window.addEventListener('resize', ()=>{ if (!isMobile()) internetBar.classList.remove('show'); updateSubbarUI(); });
document.addEventListener('click', (e)=>{ const out=!internetBar.contains(e.target)&&!navInternet.contains(e.target); if (out) internetBar.classList.remove('show'); });

/* ===== 서브칩 트랙: 드래그/휠/버튼 ===== */
let drag = { active:false, moved:false, startX:0, startLeft:0, pointerId:null };
const DRAG_THRESHOLD = 5;
function onPointerDown(e){
  if (e.pointerType === 'mouse' && e.button !== 0) return;
  drag.active = true; drag.moved = false; drag.pointerId = e.pointerId;
  drag.startX = e.clientX; drag.startLeft = subbarTrack.scrollLeft;
  subbarTrack.style.cursor = 'grabbing';
}
function onPointerMove(e){
  if(!drag.active) return;
  const dx = e.clientX - drag.startX;
  if (!drag.moved && Math.abs(dx) > DRAG_THRESHOLD){
    drag.moved = true;
    try{ subbarTrack.setPointerCapture(drag.pointerId); }catch(_){}
  }
  if (drag.moved){ subbarTrack.scrollLeft = drag.startLeft - dx; }
}
function onPointerUp(e){
  if(!drag.active) return;
  subbarTrack.style.cursor = '';
  if(!drag.moved){
    const el = document.elementFromPoint(e.clientX, e.clientY);
    const chip = el && el.closest && el.closest('#internetCats span[data-carrier]');
    if (chip){ chip.focus(); chip.click(); }
  }
  try{ subbarTrack.releasePointerCapture(drag.pointerId);}catch(_){}
  drag.active=false; drag.moved=false; drag.pointerId=null;
}
subbarTrack.addEventListener('pointerdown', onPointerDown);
subbarTrack.addEventListener('pointermove', onPointerMove);
window.addEventListener('pointerup', onPointerUp);

/* 휠을 가로 스크롤로 변환 */
subbarTrack.addEventListener('wheel', (e)=>{
  const max = subbarTrack.scrollWidth - subbarTrack.clientWidth;
  if (max <= 0) return;
  const delta = Math.abs(e.deltaX) > Math.abs(e.deltaY) ? e.deltaX : e.deltaY;
  if (delta !== 0){
    e.preventDefault();
    subbarTrack.scrollLeft = clamp(subbarTrack.scrollLeft + delta, 0, max);
  }
}, {passive:false});

/* 네비 버튼 */
function scrollByAmount(px){ subbarTrack.scrollBy({left:px, behavior:'smooth'}); }
btnPrev.addEventListener('click', ()=> scrollByAmount(-Math.max(220, subbarTrack.clientWidth*0.6)));
btnNext.addEventListener('click', ()=> scrollByAmount(Math.max(220, subbarTrack.clientWidth*0.6)));

/* 스크롤 위치에 따라 버튼 표시/숨김 */
function updateSubbarUI(){
  const max = subbarTrack.scrollWidth - subbarTrack.clientWidth;
  const x = subbarTrack.scrollLeft;
  btnPrev.classList.toggle('show', x > 2);
  btnNext.classList.toggle('show', x < max - 2);
}
subbarTrack.addEventListener('scroll', updateSubbarUI, {passive:true});
window.addEventListener('resize', updateSubbarUI);

/* 키보드 접근성 */
internetCats.addEventListener('keydown', (e)=>{
  const chips = Array.from(internetCats.querySelectorAll('span[data-carrier]'));
  const current = document.activeElement.closest('span[data-carrier]');
  let idx = chips.indexOf(current);
  if (e.key === 'ArrowRight'){ e.preventDefault(); idx = clamp(idx+1,0,chips.length-1); chips[idx].focus(); chips[idx].scrollIntoView({inline:'center', block:'nearest'}); }
  if (e.key === 'ArrowLeft'){ e.preventDefault(); idx = clamp(idx-1,0,chips.length-1); chips[idx].focus(); chips[idx].scrollIntoView({inline:'center', block:'nearest'}); }
  if (e.key === 'Home'){ e.preventDefault(); chips[0].focus(); chips[0].scrollIntoView({inline:'center'}); }
  if (e.key === 'End'){ e.preventDefault(); chips[chips.length-1].focus(); chips[chips.length-1].scrollIntoView({inline:'center'}); }
});

/* 모바일: 선택 칩 중앙정렬 */
function scrollCatsToSelected(){
  if (!isMobile()) return;
  const chip = Array.from(internetCats.querySelectorAll('span')).find(s=>s.dataset.carrier===state.carrier);
  if(!chip) return;
  const wrapRect = subbarTrack.getBoundingClientRect();
  const chipRect = chip.getBoundingClientRect();
  const targetCenter = chip.offsetLeft + chipRect.width/2;
  subbarTrack.scrollTo({left: targetCenter - wrapRect.width/2, behavior: 'smooth'});
}

/* 칩 활성 표시 */
function setActiveChip(code){
  internetCats.querySelectorAll('span[data-carrier]').forEach(c=> c.classList.toggle('is-active', c.dataset.carrier===code));
}

/* ===== 데이터 ===== */
const SPEED_OPTIONS = {
  SK:["100","500","1000"], KT:["100","500","1000"], LG:["100","500","1000"],
  "스카이라이프":["100","200","500","1000"], "헬로비전":["100","160","500","1000"], SKPOP:["100","500","1000"]
};
const TV_PLANS = {
  SK:[{id:"sk-184-basic",name:"Btv 이코노미",channels:184,price:14300},{id:"sk-226-standard",name:"Btv 스탠다드",channels:226,price:17600},{id:"sk-252-all",name:"Btv ALL",channels:252,price:20900},{id:"sk-222-standard-plus",name:"Btv 스탠다드 플러스",channels:222,price:25300},{id:"sk-252-all-plus",name:"Btv ALL 플러스",channels:252,price:26400},{id:"sk-252-std-nf-prem",name:"Btv 스탠다드 넷플릭스 프리미엄",channels:252,price:32900},{id:"sk-252-all-nf-prem",name:"Btv ALL 넷플릭스 프리미엄",channels:252,price:35400}],
  KT:[{id:"kt-basic",name:"올레tv 베이직",channels:236,price:16500},{id:"kt-light",name:"올레tv 라이트",channels:240,price:17600},{id:"kt-ess",name:"올레tv 에센스",channels:263,price:20900}],
  LG:[{id:"lg-basic",name:"U+tv 베이직",channels:212,price:16500},{id:"lg-value",name:"U+tv 실속형",channels:219,price:17600},{id:"lg-std",name:"U+tv 기본형",channels:225,price:18700}],
  "스카이라이프":[{id:"sky-basic",name:"ipit TV Basic",channels:194,price:9900},{id:"sky-plus",name:"ipit TV Plus",channels:209,price:11000}],
  "헬로비전":[{id:"hv-econo",name:"이코노미",channels:102,price:8250},{id:"hv-nb-uhd",name:"뉴베이직(UHD)",channels:109,price:13200},{id:"hv-np-uhd",name:"뉴프리미엄(UHD)",channels:245,price:15400}],
  SKPOP:[{id:"skp-180",name:"Btv pop180",channels:186,price:12100},{id:"skp-230",name:"Btv pop230",channels:231,price:14300}]
};
const INTERNET_MATRIX = {
  SK:{none:{"100":22000,"500":33000,"1000":38500}, wifi:{"100":23100,"500":34100,"1000":39600}, tv:{"100":19800,"500":27500,"1000":33000}, both:{"100":22000,"500":28600,"1000":34100}},
  KT:{none:{"100":22000,"500":33000,"1000":38500}, wifi:{"100":23100,"500":34100,"1000":38500}, tv:{"100":22000,"500":27500,"1000":33000}, both:{"100":23100,"500":28600,"1000":33000}},
  LG:{tvOff:{"100":22000,"500":33000,"1000":38500}, tvOn:{"100":22000,"500":27500,"1000":33000}},
  "스카이라이프":{none:{"100":23100,"200":25300,"500":30800,"1000":36300}, wifi:{"100":24200,"200":25300,"500":30800,"1000":36300}, tv:{"100":19800,"200":22000,"500":27500,"1000":33000}, both:{"100":20900,"200":22000,"500":27500,"1000":33000}},
  "헬로비전":{tvOff:{"100":20790,"160":26510,"500":30360,"1000":31900}, tvOn:{"100":16330,"160":22110,"500":24090,"1000":25300}},
  SKPOP:{wifiOff:{"100":19800,"500":27500,"1000":33000}, wifiOn:{"100":22000,"500":28600,"1000":34100}}
};
const SK_FAMILY = {"30":{"100":-6600,"500":-9900,"1000":-11550},"50":{"100":-11000,"500":-16500,"1000":-19250}};

/* 상태 */
const state = { carrier:'SK', speed:null, tvIncluded:true, wifiIncluded:true, tv:null, mobileDiscount:0, familySelection:'none' };

/* ===== 상세 하위(x-scroll) 업그레이더: 스크롤바 없음 + 드래그 + 좌/우 버튼 ===== */
function upgradeHScroll(el){
  if(!el || el.dataset.hs==='1') return;
  el.dataset.hs='1';

  // 래퍼 구성
  const wrap = document.createElement('div'); wrap.className='hs-wrap';
  const viewport = document.createElement('div'); viewport.className='hs-viewport';
  const leftBtn = document.createElement('button'); leftBtn.type='button'; leftBtn.className='hs-nav left'; leftBtn.setAttribute('aria-label','왼쪽으로'); leftBtn.innerHTML='<i class="fa-solid fa-chevron-left"></i>';
  const rightBtn = document.createElement('button'); rightBtn.type='button'; rightBtn.className='hs-nav right'; rightBtn.setAttribute('aria-label','오른쪽으로'); rightBtn.innerHTML='<i class="fa-solid fa-chevron-right"></i>';

  // 기존 클래스 보존 + 트랙 클래스로 승격
  el.classList.add('hs-track');

  // DOM 재배치
  el.parentNode.insertBefore(wrap, el);
  wrap.appendChild(leftBtn);
  wrap.appendChild(viewport);
  viewport.appendChild(el);
  wrap.appendChild(rightBtn);

  // 버튼 스크롤
  function scrollBy(px){ el.scrollBy({left:px,behavior:'smooth'}); }
  leftBtn.addEventListener('click', ()=> scrollBy(-Math.max(220, el.clientWidth*0.6)));
  rightBtn.addEventListener('click', ()=> scrollBy(Math.max(220, el.clientWidth*0.6)));

  // 드래그 스크롤
  let d={on:false, moved:false, id:null, sx:0, sl:0};
  el.addEventListener('pointerdown', (e)=>{
    if (e.pointerType==='mouse' && e.button!==0) return;
    d.on=true; d.moved=false; d.id=e.pointerId; d.sx=e.clientX; d.sl=el.scrollLeft; el.style.cursor='grabbing';
  });
  el.addEventListener('pointermove', (e)=>{
    if(!d.on) return;
    const dx=e.clientX-d.sx;
    if(!d.moved && Math.abs(dx)>5){ d.moved=true; try{el.setPointerCapture(d.id);}catch(_){}} 
    if(d.moved){ el.scrollLeft=d.sl-dx; }
  });
  window.addEventListener('pointerup', ()=>{
    if(!d.on) return;
    el.style.cursor=''; try{el.releasePointerCapture(d.id);}catch(_){}
    d={on:false,moved:false,id:null,sx:0,sl:0};
  });

  // 휠을 가로로
  el.addEventListener('wheel', (e)=>{
    const max = el.scrollWidth - el.clientWidth; if(max<=0) return;
    const delta = Math.abs(e.deltaX) > Math.abs(e.deltaY) ? e.deltaX : e.deltaY;
    if(delta!==0){ e.preventDefault(); el.scrollLeft = clamp(el.scrollLeft + delta, 0, max); }
  }, {passive:false});

  // 버튼 표시
  function update(){
    const max = el.scrollWidth - el.clientWidth;
    const x = el.scrollLeft;
    leftBtn.classList.toggle('show', x>2);
    rightBtn.classList.toggle('show', x<max-2);
  }
  el.addEventListener('scroll', update, {passive:true});
  window.addEventListener('resize', update);
  requestAnimationFrame(update);

  // endpad 보증
  ensureEndpad(el);
}

/* ===== 렌더/로직 ===== */
function setActive(groupSel, btn){ $$(groupSel+' .dm-btn').forEach(b=>b.classList.remove('active')); if(btn) btn.classList.add('active'); }
function applyCarrierRules(){
  const wifi=$('#dm-wifi-toggle'), tv=$('#dm-tv-toggle'), famWrap=$('#dm-family-wrap');
  wifi.disabled=false; tv.disabled=false; famWrap.style.display=(state.carrier==='SK')?'':'none';
  if(state.carrier!=='SK'){ state.familySelection='none'; const noneBtn=document.querySelector('#dm-family [data-family="none"]'); if(noneBtn) setActive('#dm-family', noneBtn); }
  if(state.carrier==='LG' || state.carrier==='헬로비전'){ state.wifiIncluded=true; wifi.checked=true; wifi.disabled=true; } else { wifi.checked=state.wifiIncluded; }
  if(state.carrier==='SKPOP'){ state.tvIncluded=true; tv.checked=true; tv.disabled=true; } else { tv.checked=state.tvIncluded; }
}
function getInternetPrice(){
  const sp=String(state.speed), c=state.carrier;
  if(c==='LG') return (state.tvIncluded?INTERNET_MATRIX.LG.tvOn[sp]:INTERNET_MATRIX.LG.tvOff[sp])||0;
  if(c==='헬로비전') return (state.tvIncluded?INTERNET_MATRIX['헬로비전'].tvOn[sp]:INTERNET_MATRIX['헬로비전'].tvOff[sp])||0;
  if(c==='SKPOP') return (state.wifiIncluded?INTERNET_MATRIX.SKPOP.wifiOn[sp]:INTERNET_MATRIX.SKPOP.wifiOff[sp])||0;
  const key=(state.tvIncluded&&state.wifiIncluded)?'both':(state.tvIncluded?'tv':(state.wifiIncluded?'wifi':'none'));
  return INTERNET_MATRIX[c][key][sp]||0;
}
function getFamilyDiscount(){ if(state.carrier!=='SK'||state.familySelection==='none') return 0; const sp=String(state.speed); return SK_FAMILY[state.familySelection]?.[sp]||0; }

function renderSpeedOptions(){
  const box=$('#dm-speed-options'); box.innerHTML='';
  (SPEED_OPTIONS[state.carrier]||[]).forEach((sp,i)=>{
    const el=document.createElement('span'); el.className='dm-btn'+(i===0?' active':''); el.dataset.speed=sp;
    const label=sp==='1000'?'1G':sp+'M';
    el.innerHTML=`<b>${label} 월 - 원</b>`;
    if(sp==='500'){ const b=document.createElement('span'); b.className='badge-reco'; b.textContent='추천'; el.appendChild(b); }
    box.appendChild(el); if(i===0) state.speed=sp;
  });
  ensureEndpad(box);
  refreshSpeedPriceLabels();
  upgradeHScroll(box);
}
function refreshSpeedPriceLabels(){
  $$('#dm-speed-options .dm-btn').forEach(btn=>{
    const sp=btn.dataset.speed; const prev=state.speed; state.speed=sp;
    const price=getInternetPrice();
    btn.querySelector('b').textContent = (sp==='1000'?'1G':sp+'M') + ' 월 ' + money(price) + '원';
    state.speed=prev;
  });
}
function renderTvPlans(){
  const section=$('#dm-tv-section'), box=$('#dm-tv-options'); box.innerHTML='';
  if(!state.tvIncluded){ section.style.display='none'; state.tv=null; updateTotal(); renderFinalTable(); return; }
  section.style.display='';
  const plans=Array.isArray(TV_PLANS[state.carrier])?TV_PLANS[state.carrier]:[];
  if(!plans.length){ box.innerHTML='<div class="dm-help">해당 통신사 TV 요금제는 준비중입니다.</div>'; state.tv=null; updateTotal(); renderFinalTable(); return; }
  plans.forEach((p,i)=>{
    const el=document.createElement('span'); el.className='dm-btn'+(i===0?' active':''); el.dataset.tv=p.id; el.dataset.price=p.price; el.dataset.name=p.name;
    el.innerHTML=`<b>${p.channels} 채널 ${p.name} · 월 ${money(p.price)}원</b>`;
    box.appendChild(el);
    if(i===0) state.tv={id:p.id,name:p.name,price:p.price};
  });
  ensureEndpad(box);
  updateTotal();
  renderFinalTable();
  upgradeHScroll(box);
}
function updateTotal(){
  let total=0; const parts=[]; const internet=getInternetPrice();
  if(internet>0){ const label=state.speed==='1000'?'1G':(state.speed+'M'); parts.push(`인터넷 ${label} ${money(internet)}원`); total+=internet; }
  if(state.tvIncluded&&state.tv){ total+=state.tv.price; parts.push(`TV(${state.tv.name}) ${money(state.tv.price)}원`); }
  if(state.mobileDiscount){ total+=state.mobileDiscount; parts.push(`결합할인 ${money(state.mobileDiscount)}원`); }
  const fam=getFamilyDiscount(); if(fam){ total+=fam; parts.push(`온가족할인 ${money(fam)}원`); }
  $('#dm-total').textContent=`월 ${money(total)}원`;
  $('#dm-breakdown').textContent=parts.join(' · ');
}

/* ✅ 최종 요금표 렌더 */
function renderFinalTable(){
  const tbody = $('#dm-final-table tbody'); tbody.innerHTML='';
  $('#dm-final-carrier').textContent = state.carrier;
  const speeds = SPEED_OPTIONS[state.carrier]||[];
  speeds.forEach(sp=>{
    const prev = state.speed; state.speed = sp;
    const internet = getInternetPrice();
    const tvPrice = (state.tvIncluded && state.tv) ? state.tv.price : 0;
    const mobile = state.mobileDiscount||0;
    const fam = (state.carrier==='SK') ? ( (state.familySelection==='none')?0:(SK_FAMILY[state.familySelection]?.[sp]||0) ) : 0;
    const total = internet + tvPrice + mobile + fam;

    const tr=document.createElement('tr');
    const label = (sp==='1000') ? '1G' : sp+'M';
    tr.innerHTML = `
      <td><b>${label}</b>${sp==='500'?'<span class="dm-tag">추천</span>':''}</td>
      <td>${internet?money(internet)+'원':'-'}</td>
      <td>${tvPrice?money(tvPrice)+'원':'-'}</td>
      <td>${mobile?money(mobile)+'원':'-'}</td>
      <td>${fam?money(fam)+'원':'-'}</td>
      <td><b>${money(total)}원</b></td>
    `;
    tbody.appendChild(tr);
    state.speed = prev;
  });
}

/* ===== 이벤트 바인딩(기존) ===== */
document.getElementById('dm-carriers').addEventListener('click', e=>{
  const btn=e.target.closest('.dm-btn'); if(!btn) return;
  state.carrier=btn.dataset.carrier; setActive('#dm-carriers', btn);
  applyCarrierRules(); renderSpeedOptions(); renderTvPlans(); updateTotal();
  ensureEndpad($('#dm-carriers')); ensureEndpad($('#dm-bundle-mobile')); ensureEndpad($('#dm-family'));
  upgradeHScroll($('#dm-carriers')); upgradeHScroll($('#dm-bundle-mobile')); upgradeHScroll($('#dm-family'));
  if (isMobile()) internetBar.classList.remove('show');
  setActiveChip(state.carrier);
  scrollCatsToSelected(); updateSubbarUI();
});
document.getElementById('dm-speeds').addEventListener('click', e=>{
  const btn=e.target.closest('.dm-btn'); if(!btn||!btn.dataset.speed) return;
  state.speed=btn.dataset.speed; setActive('#dm-speeds #dm-speed-options', btn); updateTotal(); renderFinalTable();
});
document.getElementById('dm-tv-toggle').addEventListener('change', e=>{
  state.tvIncluded=e.target.checked; if(state.carrier==='SKPOP'){ state.tvIncluded=true; e.target.checked=true; }
  renderTvPlans(); refreshSpeedPriceLabels(); updateTotal();
});
document.getElementById('dm-wifi-toggle').addEventListener('change', e=>{
  state.wifiIncluded=e.target.checked; if(state.carrier==='LG'||state.carrier==='헬로비전'){ state.wifiIncluded=true; e.target.checked=true; }
  refreshSpeedPriceLabels(); updateTotal(); renderFinalTable();
});
document.getElementById('dm-tv-section').addEventListener('click', e=>{
  const btn=e.target.closest('.dm-btn'); if(!btn||!btn.dataset.tv) return;
  state.tv={id:btn.dataset.tv,name:btn.dataset.name,price:parseInt(btn.dataset.price,10)}; setActive('#dm-tv-section', btn); updateTotal(); renderFinalTable();
});
document.getElementById('dm-bundle-mobile').addEventListener('click', e=>{
  const btn=e.target.closest('.dm-btn'); if(!btn) return;
  state.mobileDiscount=parseInt(btn.dataset.mobile,10)||0; setActive('#dm-bundle-mobile', btn); updateTotal(); renderFinalTable();
});
document.getElementById('dm-family').addEventListener('click', e=>{
  const btn=e.target.closest('.dm-btn'); if(!btn) return;
  state.familySelection=btn.dataset.family||'none'; setActive('#dm-family', btn); updateTotal(); renderFinalTable();
});

/* 카테고리 칩 → 상세 화면 */
function selectCategory(catCarrier){
  window.toggleInternetDetail(true);
  const targetBtn=Array.from(document.querySelectorAll('#dm-carriers .dm-btn')).find(b=>b.dataset.carrier===catCarrier);
  if(targetBtn){ targetBtn.click(); }
}
document.querySelectorAll('#internetCats span[data-carrier]').forEach(chip=>{
  chip.addEventListener('click', ()=> selectCategory(chip.dataset.carrier));
  chip.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); selectCategory(chip.dataset.carrier); }});
});

/* 상세 표시 토글 */
window.toggleInternetDetail = function(show){
  const detail = document.getElementById('internet-detail');
  const homeSections = Array.from(document.querySelectorAll('.custom-section')).filter(s=> s.id !== 'internet-detail');
  detail.style.display = show ? 'block' : 'none';
  homeSections.forEach(s => s.style.display = show ? 'none' : 'flex');
  if(show){ detail.scrollIntoView({behavior:'smooth', block:'start'}); }
};

/* 초기 렌더 */
function boot(){
  applyCarrierRules(); renderSpeedOptions(); renderTvPlans(); updateTotal(); renderFinalTable();

  // 상세 하위 모든 x-scroll 업그레이드(스크롤바 제거 + 드래그 + 버튼)
  ['#dm-carriers','#dm-speed-options','#dm-tv-options','#dm-bundle-mobile','#dm-family','#dm-total-scroll','#dm-table-scroll']
    .forEach(sel=>{ const el=document.querySelector(sel); if(el){ ensureEndpad(el); upgradeHScroll(el); } });

  // 상단 탭은 그대로
  ensureEndpad(document.querySelector('#topMainTabs'));
  updateSubbarUI();
}
boot();
window.addEventListener('resize', ()=>{ if (isMobile()) boot(); });

/* 폼 & 기타 */
const fixedFormWrapper=document.getElementById('fixedFormWrapper');
const consultOpenBtn=document.getElementById('consultOpenBtn');
const consultCloseBtn=document.getElementById('consultCloseBtn');
consultOpenBtn.addEventListener('click', ()=>{ fixedFormWrapper.classList.add('active'); consultOpenBtn.style.display='none'; });
consultCloseBtn.addEventListener('click', ()=>{ fixedFormWrapper.classList.remove('active'); consultOpenBtn.style.display='flex'; });
document.addEventListener('keydown', (e)=>{ if(e.key==="Escape" && fixedFormWrapper.classList.contains('active')){ fixedFormWrapper.classList.remove('active'); consultOpenBtn.style.display='flex'; }});
document.getElementById('scrollTopBtn').addEventListener('click', ()=>{ window.scrollTo({top:0,behavior:'smooth'}); });

const accToggle=document.getElementById('privacyAccordionToggle'); const accPanel=document.getElementById('privacyAccordion');
if(accToggle && accPanel){
  const toggle=()=>{ const willOpen=!accPanel.classList.contains('open'); accPanel.classList.toggle('open',willOpen); accToggle.setAttribute('aria-expanded', String(willOpen)); accToggle.textContent=willOpen?'[닫기]':'[더보기]'; };
  accToggle.addEventListener('click', toggle);
}

/* 폼 제출 */
document.getElementById('consultForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const data={ name:$('#name').value.trim(), phone:$('#phone').value.trim(), category:$('#category').value,
    agree:$('#agree').checked, marketingAgree:$('#mktAgree').checked, agreeAt:new Date().toISOString() };
  if(!data.agree){ alert('개인정보 수집·이용(필수)에 동의해 주세요.'); return; }
  try{
    await fetch('https://airtable-proxy-oyrb.vercel.app/api/submit',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});
    alert('상담 신청이 완료되었습니다. 빠른 안내드리겠습니다!');
    e.target.reset(); fixedFormWrapper.classList.remove('active'); consultOpenBtn.style.display='flex';
  }catch(err){ alert('에러 발생! 잠시 후 다시 시도해 주세요.'); }
});

/* 최초 로드시 서브바 UI 상태 반영 */
requestAnimationFrame(updateSubbarUI);
</script>
</body>
</html>
